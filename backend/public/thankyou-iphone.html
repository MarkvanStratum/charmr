<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Thank You</title>
    <style>
      /* Simple, centered layout */
      :root { color-scheme: light dark; }
      html, body { height: 100%; margin: 0; }
      body {
        display: grid;
        place-items: center;
        font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        line-height: 1.5;
      }
      .container {
        text-align: center;
        max-width: 42rem;
        padding: 2rem;
      }
      h1 {
        margin: 0 0 0.5rem 0;
        font-size: clamp(1.5rem, 3vw + 1rem, 2.25rem);
      }
      p { margin: 0; font-size: 1.05rem; opacity: 0.9; }
    </style>
  </head>
  <body>
    <main class="container" role="main" aria-labelledby="ty-heading">
      <h1 id="ty-heading">Thank you for your order.</h1>
      <p>We will contact you shortly with delivery details.</p>
    </main>

    <!-- GoAffPro Loader: keep this EXACTLY as provided (shop id included) -->
    <script id="goaffpro-loader" type="text/javascript" src="https://api.goaffpro.com/loader.js?shop=nzyvwvfbde" async></script>

    <!-- Conversion tracking. Replace number/total with your dynamic values as needed. -->
    <script>
      (function () {
        // Order data: from URL (?number=...&total=...), with an optional ?test=1 to auto-mint unique IDs for repeat tests.
        var params = new URLSearchParams(location.search);
        var isTest = params.has('test');

        var orderNumber = params.get('number');
        if (!orderNumber && isTest) {
          orderNumber = '#' + Date.now(); // e.g. #1694100000000
        }
        var orderTotal = params.get('total');

        var orderData = {
          number: orderNumber || "#1001", // fallback for non-test usage
          total: orderTotal ? Number(orderTotal) : 1000
        };

        function trackConversion() {
          if (typeof window.goaffproTrackConversion === "function") {
            window.goaffpro_order = orderData; // expose for GoAffPro
            try {
              window.goaffproTrackConversion(window.goaffpro_order);
              // Optional: mark as tracked to avoid double firing
              window.__goaffpro_tracked__ = true;
            } catch (_) { /* swallow */ }
          }
        }

        // Fire after the GoAffPro loader is ready
        var loader = document.getElementById('goaffpro-loader');
        if (loader) {
          loader.addEventListener('load', function () {
            if (!window.__goaffpro_tracked__) trackConversion();
          });
        }

        // Fallback: if loader was already cached/loaded, attempt after DOM is ready
        if (document.readyState === 'complete' || document.readyState === 'interactive') {
          setTimeout(trackConversion, 0);
        } else {
          document.addEventListener('DOMContentLoaded', function () { setTimeout(trackConversion, 0); });
        }
      })();
    </script>
  </body>
</html>
