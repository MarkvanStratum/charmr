<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Charmr.xyz — Sign Up</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#0e0e0f;
    --card:#151518;
    --text:#fff;
    --muted:#b7b9c0;
    --accent:#f4a005;
    --accent-2:#ffa800;
    --accent-3:#ffbd3a;
    --success:#13c47f;
    --danger:#ef4444;
    --radius:16px;
    --ring:0 0 0 1.5px rgba(255,255,255,.08) inset, 0 8px 24px rgba(0,0,0,.45);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
    background:var(--bg);
    color:var(--text);
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
  }
  .app{
    max-width:900px; /* wider to fit the two-column premium layout */
    margin:0 auto;
    min-height:100%;
    display:flex;
    flex-direction:column;
  }

  /* Top app bar */
  .topbar{
    position:sticky; top:0; z-index:40;
    display:flex; align-items:center; justify-content:space-between;
    padding:14px 16px;
    background:linear-gradient(to bottom,rgba(0,0,0,.7),rgba(0,0,0,0));
    backdrop-filter:saturate(120%) blur(8px);
  }
  .brand{
    display:flex; align-items:center; gap:10px; font-weight:800; letter-spacing:.2px;
  }
  .brand .logo{
    width:22px; height:22px; display:grid; place-items:center;
    color:#6ee7b7; background:#2a2a2e; border-radius:8px;
    box-shadow:inset 0 0 0 1.5px rgba(255,255,255,.06);
  }

  /* Sections */
  .section{ padding:16px; }
  .title{ margin:8px 0 8px; font-weight:800; font-size:28px; line-height:1.15; }
  .subtitle{color:#d9dbe2; opacity:.92; margin:0 0 14px; font-weight:600}

  /* ===== Signup: small hero on first page only ===== */
  .signup-hero-title{
    text-align:center; margin:6px 0 10px; font-weight:800; font-size:26px;
    background:linear-gradient(180deg,#fff,#e9e9ee); -webkit-background-clip:text; -webkit-text-fill-color:transparent;
  }
  .hero{
    width:72%;
    max-width:260px;   /* <— tweak these to resize the small signup hero */
    margin:0 auto 14px;
    aspect-ratio:9/13;
    border-radius:16px;
    overflow:hidden;
    box-shadow:var(--ring);
    background:#0b0b0d;
  }
  .hero video{ width:100%; height:100%; object-fit:cover; display:block }

  /* ===== Premium: new layout ===== */
  .offer-bar{
    display:flex; align-items:center; justify-content:space-between; gap:10px;
    background:linear-gradient(90deg, rgba(255,173,15,.25), rgba(255,198,64,.15));
    border:1px solid rgba(255,198,64,.25);
    padding:10px 12px; border-radius:14px; margin:6px 0 18px;
  }
  .offer-left{ display:flex; align-items:center; gap:10px; font-weight:800; }
  .pill{
    display:inline-flex; align-items:center; gap:8px; padding:8px 10px;
    background:#1d1d21; border-radius:999px; box-shadow:inset 0 0 0 1.5px rgba(255,255,255,.06);
  }
  .pill .timer{ font-weight:800; color:#ffcc58; min-width:54px; text-align:center; }
  .btn-claim{
    background:linear-gradient(180deg,#ffc640,#ffad0f); color:#111;
    font-weight:800; border:none; border-radius:999px; padding:10px 14px; cursor:pointer;
    box-shadow:0 8px 22px rgba(255,174,15,.28);
  }

  .headline{ font-size:38px; font-weight:800; margin:6px 0 4px; }
  .headline strong{ color:#ffcc58; }
  .subhead{ color:#d7d7dc; font-weight:700; margin:0 0 14px; }
  .promo-kicker{ text-align:center; margin:12px 0 18px; font-weight:700; }

  .plans-grid{
    display:grid; grid-template-columns:1fr; gap:16px; align-items:start;
  }
  @media (min-width:860px){
    .plans-grid{ grid-template-columns:380px 1fr; gap:24px; }
  }

  /* left media */
  .media-card{
    background:#0b0b0d; border-radius:18px; overflow:hidden; box-shadow:var(--ring);
  }
  .media-card .frame{ aspect-ratio:1/1; width:100%; }
  .media-card video{ width:100%; height:100%; object-fit:cover; display:block }

  /* right panel with plan options */
  .plans-wrap{
    background:#141419; border-radius:18px; padding:16px; box-shadow:var(--ring);
  }
  .plan-card{
    display:flex; justify-content:space-between; align-items:center; gap:12px;
    background:#121216; border:1px solid rgba(255,255,255,.06);
    border-radius:14px; padding:14px; cursor:pointer;
    transition:transform .06s ease, outline-color .2s ease, box-shadow .2s ease;
    outline:1.5px solid transparent;
  }
  .plan-card + .plan-card{ margin-top:10px; }
  .plan-card:hover{ transform:translateY(-1px); }
  .plan-card.selected{
    outline-color:#ffcc58;
    box-shadow:0 0 0 3px rgba(255,209,89,.12);
  }
  .plan-info{ display:flex; flex-direction:column; gap:6px; }
  .plan-name{ font-weight:800; }
  .strike{ color:#80808a; text-decoration:line-through; font-size:12px; }
  .tag{
    display:inline-block; background:#1f1f25; color:#ffda7a; padding:6px 10px;
    border-radius:999px; font-size:12px; font-weight:800; margin-bottom:4px;
    box-shadow:inset 0 0 0 1.5px rgba(255,255,255,.06)
  }
  .price-right{ text-align:right; font-weight:800; }
  .price-right .big{ font-size:34px; line-height:1; display:block; }
  .price-right small{ color:#cfcfd5; }

  .most-pop{
    margin:8px 0 -2px; text-align:center; font-weight:800; color:#111;
    background:linear-gradient(180deg,#ffc640,#ffad0f); border-radius:12px; padding:10px 12px;
  }

  .cta-row{ display:grid; gap:10px; margin-top:16px; }
  .btn-primary{
    display:inline-flex; align-items:center; justify-content:center; gap:10px;
    padding:14px 22px; border:none; border-radius:14px; font-weight:800; cursor:pointer;
    color:#111; background:linear-gradient(180deg,#ffc640,#ffad0f); box-shadow:0 8px 22px rgba(255,174,15,.28);
  }
  .btn-secondary{
    background:#1a1a1e; color:#fff; box-shadow:inset 0 0 0 1.5px rgba(255,255,255,.08);
    padding:12px 18px; border-radius:14px; border:none; font-weight:800; cursor:pointer;
  }
  .tiny-note{ text-align:center; color:#d7d7dc; font-weight:700; }

  .trust{
    display:grid; grid-template-columns:repeat(3,1fr); gap:12px;
    margin-top:16px; text-align:center; color:#e7e7ea; font-weight:700;
  }
  .trust .cell{
    background:#121216; border:1px solid rgba(255,255,255,.06); border-radius:12px; padding:10px;
  }
  .trust small{ display:block; color:#b7b9c0; font-weight:600; }

  /* Inputs */
  input[type="email"], input[type="password"]{
    background:#141419; color:#fff; border:1px solid rgba(255,255,255,.08);
    padding:12px; border-radius:12px; outline:none;
  }
  label{ font-weight:700; color:#e9e9ee; }

  /* Hide premium headline video on signup stage */
  .hidden{ display:none !important; }
</style>

<!-- Google tag (gtag.js) - Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=AW-17486667499"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-FDQ6REQWS8');
</script>
</head>
<body>
  <div class="app">
    <!-- Top bar -->
    <div class="topbar">
      <div class="brand">
        <span class="logo">💎</span>
        <span>Charmr.xyz</span>
      </div>
    </div>

    <!-- ================= SIGN UP (first page) ================= -->
    <section class="section" id="signup">
      <h2 class="signup-hero-title">YOUR PERFECT AI GIRLFRIEND</h2>
      <div class="hero">
        <video src="https://www.charmr.xyz/video1.mp4" autoplay muted loop playsinline></video>
      </div>

      <h2 class="title">Create your account</h2>
      <p class="subtitle">Sign up to continue to your plan selection.</p>

      <form id="signup-form" style="display:grid;gap:12px; max-width:460px; margin:0 auto;">
        <label for="email">Email</label>
        <input type="email" id="email" name="email" required placeholder="Enter your email" />

        <label for="password">Password</label>
        <input type="password" id="password" name="password" required placeholder="Create a password" />

        <button type="submit" class="btn-primary">Sign Up</button>
      </form>

      <p class="subtitle" style="text-align:center;margin-top:10px;">
        Already have an account? <a href="login.html" style="color:#ffd159;text-decoration:none;font-weight:800;">Log in</a>
      </p>
    </section>

    <!-- ================= PREMIUM (after signup success) ================= -->
    <section class="section hidden" id="premium">
      <!-- Offer bar with timer -->
      <div class="offer-bar">
        <div class="offer-left">
          <span class="pill">Limited offer</span>
          <span class="pill"><span class="timer" id="timer">10:00</span></span>
        </div>
        <button class="btn-claim" id="claimBtn">CLAIM DISCOUNT</button>
      </div>

      <h1 class="headline">She’s <strong>all yours</strong> now!</h1>
      <p class="subhead">Unlock her hottest content & live calls</p>
      <p class="promo-kicker">Get <b>Exclusive Discount</b> Only Today!</p>

      <div class="plans-grid">
        <!-- Left: video/media -->
        <div class="media-card">
          <div class="frame">
            <video src="https://charmr.xyz/video2.mp4" autoplay muted loop playsinline></video>
          </div>
        </div>

        <!-- Right: plan selector -->
        <div class="plans-wrap">
          <div class="plan-card" data-plan="month" data-price="19.99" data-perday="0.67">
            <div class="plan-info">
              <span class="tag">50% OFF</span>
              <div class="plan-name">1 month</div>
              <div class="strike">39.99 → 19.99</div>
            </div>
            <div class="price-right">
              <span class="big">$0.<span data-dec="67">67</span></span>
              <small>per day</small>
            </div>
          </div>

          <div class="plan-card selected" data-plan="year" data-price="119.88" data-perday="0.33" style="margin-top:12px;">
            <div class="plan-info">
              <span class="tag">75% OFF</span>
              <div class="plan-name">12 months</div>
              <div class="strike">479.88 → 119.88</div>
            </div>
            <div class="price-right">
              <span class="big">$0.<span data-dec="33">33</span></span>
              <small>per day</small>
            </div>
          </div>

          <div class="most-pop">MOST POPULAR</div>

          <div class="cta-row">
            <button class="btn-primary" id="unlockNowBtn">UNLOCK HER NOW — ONLY $<span id="perDayCta">0.33</span>/day</button>
            <button class="btn-secondary" id="maybeLater">Maybe later</button>
            <div class="tiny-note">🔒 3670 girlfriends claimed today</div>
          </div>

          <div class="trust">
            <div class="cell">✅ Secure<br><small>Payment</small></div>
            <div class="cell">🧾 100% Discreet<br><small>Billing</small></div>
            <div class="cell">🗓️ Cancel<br><small>Anytime</small></div>
          </div>
        </div>
      </div>
    </section>

    <div style="height:20px"></div>
  </div>

  <!-- Existing signup logic (if you have one) -->
  <script src="./signup.js"></script>

  <script>
    // ======= simple router: show premium after signup =======
    const signupSection = document.getElementById('signup');
    const premiumSection = document.getElementById('premium');
    const timerEl = document.getElementById('timer');
    const claimBtn = document.getElementById('claimBtn');
    const unlockBtn = document.getElementById('unlockNowBtn');
    const maybeLaterBtn = document.getElementById('maybeLater');
    const perDayCta = document.getElementById('perDayCta');

    // Timer (10 minutes)
    let timerId, remaining = 10*60;
    function startTimer(){
      clearInterval(timerId);
      remaining = 10*60;
      updateTimer();
      timerId = setInterval(()=>{
        remaining = Math.max(0, remaining-1);
        updateTimer();
        if(remaining===0) clearInterval(timerId);
      }, 1000);
    }
    function updateTimer(){
      const m = String(Math.floor(remaining/60)).padStart(2,'0');
      const s = String(remaining%60).padStart(2,'0');
      timerEl.textContent = `${m}:${s}`;
    }

    // Plan selection
    let selectedPlan = 'year';
    function applySelection(){
      document.querySelectorAll('.plan-card').forEach(card=>{
        card.classList.toggle('selected', card.dataset.plan === selectedPlan);
      });
      const active = document.querySelector('.plan-card.selected');
      const pd = active ? (active.dataset.perday || '0.33') : '0.33';
      perDayCta.textContent = Number(pd).toFixed(2);
    }
    document.querySelectorAll('.plan-card').forEach(card=>{
      card.addEventListener('click', ()=>{
        selectedPlan = card.dataset.plan || 'year';
        applySelection();
      });
    });
    applySelection();

    // CTA actions
    function goPay(){
      try{ sessionStorage.setItem('selectedPlan', selectedPlan); }catch{}
      window.location.href = '/payment.html';
    }
    unlockBtn.addEventListener('click', goPay);
    claimBtn.addEventListener('click', goPay);
    maybeLaterBtn.addEventListener('click', ()=> window.location.href = '/profiles.html');

    // Intercept signup form to keep flow on-page
    const signupForm = document.getElementById('signup-form');
    if (signupForm) {
      signupForm.addEventListener('submit', async (ev) => {
        ev.preventDefault();
        ev.stopPropagation();
        if (ev.stopImmediatePropagation) ev.stopImmediatePropagation();

        const email = (document.getElementById('email').value || '').trim();
        const password = document.getElementById('password').value;

        if (!email || !password) {
          alert('Please enter your email and password.');
          return;
        }

        try {
          const res = await fetch('/api/register', {
            method:'POST',
            headers:{ 'Content-Type':'application/json' },
            body: JSON.stringify({ email, password })
          });
          const data = await res.json().catch(()=> ({}));

          if (!res.ok) {
            alert(data?.error || 'Registration failed. Please try again.');
            return;
          }

          if (data.token) { try { localStorage.setItem('token', data.token); } catch {} }
          // Show premium layout
          signupSection.classList.add('hidden');
          premiumSection.classList.remove('hidden');
          startTimer();
        } catch (err) {
          alert('Registration failed. Please try again.');
        }
      }, true);
    }
  </script>

  <!-- GoAffPro (must be on every page) -->
  <script type="text/javascript" src="https://api.goaffpro.com/loader.js?shop=nzyvwvfbde"></script>
</body>
</html>
