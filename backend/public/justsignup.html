<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Charmr.xyz â€” Sign Up</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#0e0e0f;
    --card:#151518;
    --text:#fff;
    --muted:#b7b9c0;
    --accent:#f4a005;
    --accent-2:#ffa800;
    --accent-3:#ffbd3a;
    --success:#13c47f;
    --danger:#ef4444;
    --radius:16px;
    --ring:0 0 0 1.5px rgba(255,255,255,.08) inset, 0 8px 24px rgba(0,0,0,.45);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
    background:var(--bg);
    color:var(--text);
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
  }
  .app{
    max-width:480px;
    margin:0 auto;
    min-height:100%;
    display:flex;
    flex-direction:column;
  }

  /* Top bar */
  .topbar{
    position:sticky; top:0; z-index:40;
    display:flex; align-items:center; justify-content:space-between;
    padding:14px 16px;
    background:linear-gradient(to bottom,rgba(0,0,0,.7),rgba(0,0,0,0));
    backdrop-filter:saturate(120%) blur(8px);
  }
  .brand{
    display:flex; align-items:center; gap:10px; font-weight:800; letter-spacing:.2px;
  }
  .brand .logo{
    width:22px; height:22px; display:grid; place-items:center;
    color:#6ee7b7; background:#2a2a2e; border-radius:8px;
    box-shadow:inset 0 0 0 1.5px rgba(255,255,255,.06);
  }

  /* Sections */
  .section{ padding:16px; }
  .title{
    margin:8px 0 8px; font-weight:800; font-size:28px; line-height:1.15;
    text-align:left;
  }
  .subtitle{color:#d9dbe2; opacity:.92; margin:0 0 14px; font-weight:600}

  /* Small hero for signup only */
  .signup-hero-title{
    margin:6px 0 10px;
    font-size:22px;
    font-weight:800;
    letter-spacing:.5px;
    text-align:center;
  }
  .hero{
    width:30%;
    max-width:260px;
    margin:0 auto 14px;
    aspect-ratio:9/13;
    border-radius:16px;
    overflow:hidden;
    box-shadow:var(--ring);
    background:#0b0b0d;
  }
  .hero video{width:100%; height:100%; object-fit:cover; display:block}

  /* Form */
  form{ display:grid; gap:12px; }
  label{ font-weight:700; color:#e7e7ea; }
  input[type="email"], input[type="password"]{
    width:100%; padding:14px 12px; border-radius:12px; border:none; outline:none;
    background:#1a1a1e; color:#fff; box-shadow:inset 0 0 0 1.5px rgba(255,255,255,.08);
  }

  /* Buttons */
  .btn{
    display:inline-flex; align-items:center; justify-content:center; gap:10px;
    padding:14px 22px; border:none; border-radius:14px; font-weight:800; cursor:pointer;
    color:#111; background:linear-gradient(180deg,#ffc640,#ffad0f); box-shadow:0 8px 22px rgba(255,174,15,.28);
  }
  .btn.full{width:100%}
  .btn.secondary{
    background:#1a1a1e; color:#fff; box-shadow:inset 0 0 0 1.5px rgba(255,255,255,.08);
  }
  .btn:active{transform:translateY(1px)}

  /* Plans */
  .plans{display:flex; flex-direction:column; gap:14px; margin:14px 0 28px}
  .plan{
    background:#141419; border-radius:18px; padding:14px; box-shadow:var(--ring); position:relative; cursor:pointer;
  }
  .plan .tag{position:absolute; top:12px; left:12px; background:#1f1f25; color:#ffda7a; padding:6px 10px; border-radius:999px; font-size:12px; font-weight:800; box-shadow:inset 0 0 0 1.5px rgba(255,255,255,.06)}
  .plan .row{display:flex; align-items:center; justify-content:space-between; gap:12px}
  .plan .price{display:flex; align-items:baseline; gap:6px; font-weight:800}
  .plan .price .num{font-size:34px}
  .plan .struck{color:#80808a; text-decoration:line-through; font-size:12px}
  .plan.pop{outline:2px solid #ffb429; box-shadow:0 0 0 3px rgba(255,180,41,.15);}
  .plan.selected{outline:2px solid #ffd159; box-shadow:0 0 0 3px rgba(255,209,89,.15);}

  .most-pop{
    margin:8px 0 -2px; text-align:center; font-weight:800; color:#111; background:linear-gradient(180deg,#ffc640,#ffad0f); border-radius:12px; padding:10px 12px;
  }

  .center{text-align:center}
  .mt8{margin-top:8px}
  .hidden{display:none !important}
</style>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=AW-17486667499"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  /* Keep your GA4 config ID */
  gtag('config', 'G-FDQ6REQWS8');
</script>
</head>
<body>
  <div class="app">
    <!-- Top bar -->
    <div class="topbar">
      <div class="brand">
        <span class="logo">ðŸ’Ž</span>
        <span>Charmr.xyz</span>
      </div>
    </div>

    <!-- Sign Up -->
    <section class="section" id="signup">
      <h2 class="signup-hero-title">YOUR PERFECT AI GIRLFRIEND</h2>
      <div class="hero">
        <video src="https://www.charmr.xyz/video1.mp4" autoplay muted loop playsinline></video>
      </div>

      <h2 class="title">Create your account</h2>
      <p class="subtitle">Sign up to continue to your plan selection.</p>

      <form id="signup-form">
        <label for="email">Email</label>
        <input type="email" id="email" name="email" required placeholder="Enter your email" autocomplete="email" />

        <label for="password">Password</label>
        <input type="password" id="password" name="password" required placeholder="Create a password" autocomplete="new-password" />

        <button type="submit" class="btn full">Sign Up</button>
      </form>

      <p class="center mt8">
        Already have an account?
        <a href="login.html" style="color:#ffd159;text-decoration:none;">Log in here</a>
      </p>
    </section>

    <!-- Plan Selection (no hero here) -->
    <section class="section hidden" id="premium">
      <h2 class="title">Choose your plan</h2>
      <p class="subtitle">Unlock everything immediately. You can cancel anytime.</p>

      <div class="plans" id="plans">
        <div class="plan" data-plan="month">
          <div class="tag">50% OFF</div>
          <div class="row">
            <div>
              <div style="font-weight:800">1 month</div>
              <div class="struck">39.99 â†’ 19.99</div>
            </div>
            <div class="price"><span class="num">0.66</span><span>USD<br><small>per day</small></span></div>
          </div>
        </div>

        <div class="plan" data-plan="year">
          <div class="tag">70% OFF</div>
          <div class="row">
            <div>
              <div style="font-weight:800">12 months</div>
              <div class="struck">399.99 â†’ 119.99</div>
            </div>
            <div class="price"><span class="num">0.33</span><span>USD<br><small>per day</small></span></div>
          </div>
        </div>

        <div class="plan pop selected" data-plan="quarter">
          <div class="tag">60% OFF</div>
          <div class="row">
            <div>
              <div style="font-weight:800">3 months</div>
              <div class="struck">99.99 â†’ 39.99</div>
            </div>
            <div class="price"><span class="num">0.49</span><span>USD<br><small>per day</small></span></div>
          </div>
          <div class="most-pop">MOST POPULAR</div>
        </div>

        <button class="btn full mt8" id="continuePremium">Continue</button>
      </div>
    </section>

    <div style="height:20px"></div>
  </div>

<script>
  // Handle signup â†’ show plans (hide the signup section so hero/title disappear)
  const signupForm = document.getElementById('signup-form');
  const premiumSec = document.getElementById('premium');
  const signupSec  = document.getElementById('signup');

  signupForm.addEventListener('submit', async (ev)=>{
    ev.preventDefault();

    const email = (document.getElementById('email').value || '').trim();
    const password = document.getElementById('password').value;

    if (!email || !password) {
      alert('Please enter your email and password.');
      return;
    }

    try {
      const res = await fetch('/api/register', {
        method:'POST',
        headers:{ 'Content-Type':'application/json' },
        body: JSON.stringify({ email, password })
      });
      const data = await res.json().catch(()=> ({}));

      if (!res.ok) {
        alert(data?.error || 'Registration failed. Please try again.');
        return;
      }

      if (data.token) {
        try { localStorage.setItem('token', data.token); } catch {}
      }

      // show plan selection (no hero/title on this step)
      signupSec.classList.add('hidden');
      premiumSec.classList.remove('hidden');
      window.scrollTo({ top: 0, behavior: 'smooth' });
    } catch (err) {
      alert('Registration failed. Please try again.');
    }
  });

  // Plan selection + redirect
  const plansEl = document.getElementById('plans');
  const contBtn = document.getElementById('continuePremium');
  let selectedPlan = 'quarter'; // default

  function applySelection(){
    plansEl.querySelectorAll('.plan').forEach(card=>{
      card.classList.toggle('selected', (card.dataset.plan === selectedPlan));
    });
  }
  plansEl.querySelectorAll('.plan').forEach(card=>{
    card.addEventListener('click', ()=>{
      selectedPlan = card.dataset.plan || 'year';
      applySelection();
    });
  });
  applySelection();

  contBtn.addEventListener('click', ()=>{
    try { sessionStorage.setItem('selectedPlan', selectedPlan || 'year'); } catch {}
    window.location.href = 'payment.html';
  });
</script>

<!-- GoAffPro (must be on every page) -->
<script type="text/javascript" src="https://api.goaffpro.com/loader.js?shop=nzyvwvfbde"></script>
</body>
</html>
