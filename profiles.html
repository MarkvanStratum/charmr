<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Meet UK Girls on Charmer</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header>
    <h1>Meet UK Girls on Charmer</h1>
    <div id="inbox-icon" title="Inbox (0)" onclick="toggleInbox()">ðŸ’Œ <span id="inbox-count">0</span></div>
  </header>

  <main id="profiles-container"></main>

  <div id="inbox" class="hidden">
    <h2>Inbox</h2>
    <ul id="inbox-list"></ul>
  </div>

  <div id="chat-windows"></div>

  <script src="girls.json" type="application/json" id="girls-data"></script>
  <script src="chat.js"></script>
  <script>
    // Load girls data and render profiles
    fetch('girls.json')
      .then(res => res.json())
      .then(data => {
        window.girlsData = data;
        renderProfiles(data);
      });

    function renderProfiles(girls) {
      const container = document.getElementById('profiles-container');
      container.innerHTML = '';
      girls.forEach((girl, i) => {
        const profileCard = document.createElement('div');
        profileCard.className = 'profile-card';
        profileCard.innerHTML = `
          <img src="${girl.photos[0]}" alt="Photo of ${girl.name}" />
          <h3>${girl.name}, ${girl.age}</h3>
          <p>${girl.city}, ${girl.country}</p>
          <button onclick="openProfile(${i})">View Profile</button>
          <button onclick="openChat(${i})">Chat with ${girl.name}</button>
        `;
        container.appendChild(profileCard);
      });
    }

    function openProfile(index) {
      // Redirect to profile.html with query ?id=index
      window.location.href = `profile.html?id=${index}`;
    }

    function openChat(index) {
      ChatManager.openChat(window.girlsData[index]);
    }

    // Inbox toggle (will be implemented in chat.js)
    function toggleInbox() {
      ChatManager.toggleInbox();
    }
  </script>
</body>
</html>
