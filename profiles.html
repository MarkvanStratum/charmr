<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Girl Profile - Charmer</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header>
    <h1>Charmer</h1>
    <button onclick="goBack()">‚Üê Back to Profiles</button>
  </header>

  <main id="profile-container"></main>

  <div id="chat-windows"></div>

  <script src="chat.js"></script>
  <script>
    function getQueryParam(name) {
      const params = new URLSearchParams(window.location.search);
      return params.get(name);
    }

    function goBack() {
      window.location.href = 'profiles.html';
    }

    const girlIndex = getQueryParam('id');
    if (!girlIndex || isNaN(girlIndex)) {
      document.getElementById('profile-container').innerText = 'Profile not found.';
    } else {
      fetch('girls.json')
        .then(res => res.json())
        .then(girls => {
          const girl = girls[girlIndex];
          if (!girl) {
            document.getElementById('profile-container').innerText = 'Profile not found.';
            return;
          }
          renderProfile(girl);
          window.girl = girl; // For chat usage
        });
    }

    function renderProfile(girl) {
      const container = document.getElementById('profile-container');
      container.innerHTML = `
        <div class="profile-detail">
          <div class="profile-photos">
            ${girl.photos.map(photo => `<img src="${photo}" alt="Photo of ${girl.name}" />`).join('')}
          </div>
          <div class="profile-info">
            <h2>${girl.name}, ${girl.age}</h2>
            <p><strong>From:</strong> ${girl.city}, ${girl.country}</p>
            <h3>About me</h3>
            <p class="about-me">${girl.bio}</p>
            <button onclick="ChatManager.openChat(window.girl)">Chat with ${girl.name}</button>
          </div>
        </div>
      `;
    }
  </script>
</body>
</html>
